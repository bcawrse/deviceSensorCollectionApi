(function(deviceService,moment){var elExists=document.getElementById("deviceVue");if(!elExists){return}var app=new Vue({el:"#deviceVue",data:{devices:{}},methods:{pollDevices:function(){window.setTimeout(function(){$.ajax({type:"GET",url:"/Device/GetDevices",data:{},cache:false,success:function(data,status,jqxhr){this.devices=data}.bind(this)});this.pollDevices()}.bind(this),5e3)},deviceIdUrl:function(device){return"/device/details?deviceId="+device.id},formattedDate:function(date){return moment(date).format("MM/DD/YYYY hh:MM:SS A")}},mounted:function(){this.pollDevices()}})})(window.SERVICE.Devices,moment);(function(deviceService){var elExists=document.getElementById("deviceDetailsVue");if(!elExists){return}var deviceId=window.deviceDetailsId||{};var celciusChartCtx;var humidityChartCtx;var carbonMonoxideChartCtx;var app=new Vue({el:"#deviceDetailsVue",data:{device:{},time:"day",carbonMonoxideReadings:{},humidityReadings:{},temperatureReadings:{},dateTimeReadings:{}},methods:{pollDevices:function(){window.setTimeout(function(){this.fetchDetails();this.pollDevices()}.bind(this),15e3)},fetchDetails:function(){$.ajax({type:"GET",url:"/Device/GetDevice",data:{Id:deviceId},cache:false,success:function(data,status,jqxhr){this.setChartData(data)}.bind(this)})},setChartData:function(data){if(!data){return{}}this.device=data;this.carbonMonoxideReadings=data.sensorReadings.map(function(val){return{x:val.readingDateTime,y:val.carbonMonoxideLevel}});this.humidityReadings=data.sensorReadings.map(function(val){return{x:val.readingDateTime,y:val.humidityPercentage}});this.temperatureReadings=data.sensorReadings.map(function(val){return{x:val.readingDateTime,y:val.temperatureCelcius}});if(!celciusChartCtx)celciusChartCtx=this.$refs["celciusChart"].getContext("2d");if(!humidityChartCtx)humidityChartCtx=this.$refs["humidityChart"].getContext("2d");if(!carbonMonoxideChartCtx)carbonMonoxideChartCtx=this.$refs["carbonMonoxideChart"].getContext("2d");var celciusChart=new Chart(celciusChartCtx,{type:"line",data:{datasets:[{label:"Temperature in Celcius",data:this.temperatureReadings,borderWidth:1}]},options:{responsive:true,maintainAspectRatio:false,scales:{xAxes:[{type:"time",time:{tooltipFormat:"MM/DD/YYYY hh:MM:SS A",unit:this.time},scaleLabel:{display:true,labelString:"Date & Time"}}],yAxes:[{ticks:{beginAtZero:true,LabelString:"Temperature"}}]}}});var humidityChart=new Chart(humidityChartCtx,{type:"line",data:{datasets:[{label:"Humidity Readings",data:this.humidityReadings,borderWidth:1}]},options:{responsive:true,maintainAspectRatio:false,scales:{xAxes:[{type:"time",time:{tooltipFormat:"MM/DD/YYYY hh:MM:SS A",unit:this.time},scaleLabel:{display:true,labelString:"Date & Time"}}],yAxes:[{scaleLabel:{display:true,LabelString:"Humidity %"}}]}}});var carbonMonoxideChart=new Chart(carbonMonoxideChartCtx,{type:"line",data:{datasets:[{label:"Carbon Monoxide Readings in PPM",data:this.carbonMonoxideReadings,borderWidth:1}]},options:{responsive:true,maintainAspectRatio:false,scales:{xAxes:[{type:"time",time:{tooltipFormat:"MM/DD/YYYY hh:MM:SS A",unit:this.time},scaleLabel:{display:true,labelString:"Date & Time"}}],yAxes:[{ticks:{beginAtZero:true,LabelString:"Carbon Monoxide Level"}}]}}})},formattedDate:function(date){return moment(date).format("MM/DD/YYYY hh:MM:SS A")}},mounted:function(){if(deviceId){this.fetchDetails();this.pollDevices()}}})})(window.SERVICE.Devices);(function(){})();